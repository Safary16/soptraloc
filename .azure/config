# Azure App Service deployment configuration
version: 1

# Python version
python_version: "3.11"

# Build commands
build:
  commands:
    - cd soptraloc_system
    - pip install -r ../requirements.txt
    - python manage.py collectstatic --noinput --settings=config.settings_production

# Run command
run:
  commands:
    - cd soptraloc_system
    - python manage.py migrate --settings=config.settings_production
    - gunicorn --bind=0.0.0.0 --timeout 600 config.wsgi:application

# Environment variables
environment:
  DJANGO_SETTINGS_MODULE: "config.settings_production"
  DEBUG: "False"
  PYTHONPATH: "/home/site/wwwroot/soptraloc_system"
  DISABLE_COLLECTSTATIC: "1"